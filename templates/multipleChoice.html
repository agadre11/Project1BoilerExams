<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Math Quiz</title>

    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
            max-width: 600px;
            margin: auto;
        }

        .question-box {
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        /* Style the labels to look like clickable blocks */
        .option-label {
            display: block;
            padding: 10px 15px;
            margin: 8px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .option-label:hover {
            background-color: #f0f0f0;
        }

        /* Hide the actual radio circle if you want, or keep it */
        input[type="radio"] {
            margin-right: 10px;
        }

        /* Feedback styles */
        #result {
            margin-top: 20px;
            font-weight: bold;
            padding: 10px;
            display: none;
        }

        .correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>

<body>

    <div class="question-box">
        {{ q.text }}
    </div>

    <form id="quiz-form">
        {% for option in q.options %}
        <label class="option-label">
            <input type="radio" name="answer" value="{{ loop.index0 }}">
            {{ option }}
        </label>
        {% endfor %}

        <br>
        <button type="button" onclick="checkAnswer()">Submit Answer</button>
    </form>

    <div id="result"></div>

    <script>
        // Pass the correct index from Python to JS
        const correctIndex = {{ q.correct_index }};

        function checkAnswer() {
            const form = document.getElementById('quiz-form');
            const resultDiv = document.getElementById('result');

            // Get selected value
            const selected = form.querySelector('input[name="answer"]:checked');

            if (!selected) {
                alert("Please select an option!");
                return;
            }

            // Compare values
            // Note: selected.value is a string, so we convert to int
            if (parseInt(selected.value) === correctIndex) {
                resultDiv.innerText = "Correct! Great work.";
                resultDiv.className = "correct";
            } else {
                resultDiv.innerText = "Incorrect. Try again.";
                resultDiv.className = "incorrect";
            }

            resultDiv.style.display = "block";
        }
    </script>

</body>

</html>